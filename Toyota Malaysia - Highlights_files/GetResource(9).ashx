(function(n,t){typeof define=="function"&&define.amd?define(["jquery"],function(i){return t(n,i)}):typeof module=="object"&&typeof module.exports=="object"?module.exports=t(n,require("jquery")):n.lity=t(n,n.jQuery||n.Zepto)})(typeof window!="undefined"?window:this,function(n,t){"use strict";function l(){p[e>0?"addClass":"removeClass"]("lity-active")}function v(n){var i=t.Deferred();if(a){n.one(a,i.resolve);setTimeout(i.resolve,500)}else i.resolve();return i.promise()}function f(n,i,r){if(arguments.length===1)return t.extend({},n);if(typeof i=="string"){if(typeof r=="undefined")return typeof n[i]=="undefined"?null:n[i];n[i]=r}else t.extend(n,i);return this}function o(){return"file:"===n.location.protocol?"http:":""}function y(n){for(var i=decodeURI(n).split("&"),u={},r,t=0,f=i.length;t<f;t++)i[t]&&(r=i[t].split("="),u[r[0]]=r[1]);return u}function s(n,i){return n+(n.indexOf("?")>-1?"&":"?")+t.param(i)}function g(n){return t('<span class="lity-error"/>').append(n)}function nt(n){if(!w.test(n))return!1;var r=t('<img src="'+n+'">'),i=t.Deferred(),u=function(){i.reject(g("Failed loading image"))};r.on("load",function(){if(this.naturalWidth===0)return u();i.resolve(r)}).on("error",u);return i.promise()}function tt(n){var i,r;try{i=t(n)}catch(u){return!1}if(!i.length)return!1;r=t('<span style="display:none !important" class="lity-inline-placeholder"/>');return i.after(r).on("lity:ready",function(n,t){t.one("lity:remove",function(){r.before(i.addClass("lity-hide")).remove()})})}function it(n){var i,r=n;return i=b.exec(n),i&&(r=s(o()+"//www.youtube"+(i[2]||"")+".com/embed/"+i[4],t.extend({autoplay:1},y(i[5]||"")))),i=k.exec(n),i&&(r=s(o()+"//player.vimeo.com/video/"+i[3],t.extend({autoplay:1},y(i[4]||"")))),i=d.exec(n),i&&(r=s(o()+"//www.google."+i[3]+"/maps?"+i[6],{output:i[6].indexOf("layer=c")>0?"svembed":"embed"})),'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+r+'"><\/iframe><\/div>'}function i(n){function k(n){n.keyCode===27&&a()}function p(){var n=r.documentElement.clientHeight?r.documentElement.clientHeight:Math.round(u.height());s.css("max-height",Math.floor(n)+"px").trigger("lity:resize",[i])}function g(n,r){if(i){s=t(r);u.on("resize",p);p();i.find(".lity-loader").each(function(){var n=t(this);v(n).always(function(){n.remove()})});i.removeClass("lity-loading").find(".lity-content").empty().append(s);s.removeClass("lity-hide").trigger("lity:ready",[i,n]);y.resolve()}}function nt(n,r,f,o){if(e++,l(),i=t(f.template).addClass("lity-loading").appendTo("body"),!!f.esc)u.one("keyup",k);setTimeout(function(){i.addClass("lity-opened lity-"+n).on("click","[data-lity-close]",function(n){t(n.target).is("[data-lity-close]")&&a()}).trigger("lity:open",[i,o]);t.when(r).always(t.proxy(g,null,o))},0)}function d(n,i,r){var e,u,f=t.extend({},h,b),s,l;return i=t.extend({},c,w,i),i.handler&&f[i.handler]?(u=f[i.handler](n,o),e=i.handler):(s={},t.each(["inline","iframe"],function(n,t){f[t]&&(s[t]=f[t]);delete f[t]}),l=function(t,i){return i?(u=i(n,o),!u?void 0:(e=t,!1)):!0},t.each(f,l),e||t.each(s,l)),u&&(y=t.Deferred(),t.when(a()).done(t.proxy(nt,null,e,u,i,r))),!!u}function a(){if(i){var n=t.Deferred();return y.done(function(){e--;l();u.off("resize",p).off("keyup",k);s.trigger("lity:close",[i]);i.removeClass("lity-opened").addClass("lity-closed");var t=i,r=s;i=null;s=null;v(r.add(t)).always(function(){r.trigger("lity:remove",[t]);t.remove();n.resolve()})}),n.promise()}}function o(n){var i,r,u;if(!n.preventDefault)return o.open(n);(i=t(this),r=i.data("lity-target")||i.attr("href")||i.attr("src"),r)&&(u=i.data("lity-options")||i.data("lity"),d(r,u,i)&&n.preventDefault())}var w={},b={},i,s,y=t.Deferred().resolve();return o.handlers=t.proxy(f,o,b),o.options=t.proxy(f,o,w),o.open=function(n,t,i){return d(n,t,i),o},o.close=function(){return a(),o},o.options(n)}var r=n.document,u=t(n),p=t("html"),e=0,w=/\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$/i,b=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,k=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,d=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,h={image:nt,inline:tt,iframe:it},c={esc:!0,handler:null,template:'<div class="lity" tabindex="-1"><div class="lity-wrap" data-lity-close><div class="lity-loader">Loading...<\/div><div class="lity-container"><div class="lity-content"><\/div><button class="lity-close" type="button" title="Close (Esc)" data-lity-close>Ã—<\/button><\/div><\/div><\/div>'},a=function(){var i=r.createElement("div"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(i.style[n]!==undefined)return t[n];return!1}();i.version="@VERSION";i.handlers=t.proxy(f,i,h);i.options=t.proxy(f,i,c);t(r).on("click","[data-lity]",i());return i})